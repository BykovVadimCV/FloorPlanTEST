### **ReFloorTEST v1.0**



##### **Cистема автоматического анализа БТИ планов помещений**



**Демонстрационное решение для детекции и анализа стен, дверей и окон на БТИ чертежах планов этажей.**







##### **Описание:**



**ReFloorTEST** - демонстрационный комплекс для автоматического анализа планов этажей БТИ. Система использует комбинацию стандартных методов компьютерного зрения, глубокого обучения и морфологических операций для точного распознавания архитектурных элементов.



**Основные компоненты:**



1. **OCR модуль** - для обнаружения и маскирования текстовых аннотаций;
2. **YOLO детекторы** - для обнаружения дверей и окон;
3. **Детектор стен** - для морфологического выделения стен;
4. **Генератор датасетов** - генератор датасетов для тренировки модуля YOLO;





##### **Возможности:**



* Детекция стен с использованием морфологических операций и анализа толщины;
* Распознавание дверей и окон при помощи двух моделей YOLOv9;
* Двухпроходное OCR считывание текста для улучшения детекции;
* Merge и NMS результатов двух моделей;
* Генерация синтетических датасетов чертежей в формате YOLO;
* Экспорт в JSON с полной структурой плана;
* Визуализация результатов с цветной кодировкой;
* Batch обработка множества чертежей;





##### **Архитектура:**



**Пайплайн обработки (*main.py*)**



Входное изображение → OCR детекция текста → YOLO Model 1 → YOLO Model 2 → Merge + NMS результатов → Морфологическая детекция стен → Экспорт JSON + Визуализация





**Пайплайн генерации данных (*datagen.py*)**



Сэмплирование стиля → Построение плана (комнаты, коридоры) → Рисование стен → Добавление окон → Добавление дверей → Добавление текста → Постобработка (blur, threshold) → Аугментации (поворот, дефекты печати) → Экспорт датасета (YOLO format)





##### **Установка:**



1. **Клонирование репозитория.**
2. **Создание виртуального окружения.**
3. **Установка зависимостей.**
4. **Установка YOLOv9.**





##### **Использование:**



**main.py**



python main.py \\

  --input input/plan.png \\

  --output output/ \\

  --yolo1-weights weights/model1.pt \\

  --yolo2-weights weights/model2.pt \\

  --visualize



**datagen.py**



python datagen.py \\

  --output synth\_dataset/ \\

  --count 1000 \\

  --size 1024 \\

  --seed 42

